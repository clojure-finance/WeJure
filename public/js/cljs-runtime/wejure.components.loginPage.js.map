{"version":3,"sources":["wejure/components/loginPage.cljs"],"mappings":";AASA,yCAAA,zCAAMA,0FAAYC;AAAlB,AACI,4FAAA,rFAACC,6CAAE,gBAAA,AAAAC,hBAACC,gCAAOH;;AAEf,AAAKI,uCAAS,6CAAA,7CAACC;AAEf,AAAKC,0CAAY,6CAAA,7CAACD;AAElB,yCAAA,zCAAeE;AAAf,AACE,6BAAA,AAAAL,sDAAA,5EAACM,sCAAQJ;;;AAEX,0CAAA,1CAAeK;AAAf,AACE,6BAAA,AAAAP,yDAAA,/EAACM,sCAAQF;;;AAEX,2CAAA,3CAAMI,8FAAcC,KAAKC,SAASC,QAAQC,QAAQC;AAAlD,AACE,AAACP,sBAAOF,wCAAYQ;;AACpB,8BAAA,9BAACN,sBAAOM;;AACR,AAACE,yGAAQ,CAAA,2KAAA,yDAAA,AAAAd,5KAAiB,AAAA,wFAAA,AAAAA,gBAAWW,oFAAuBC;;AAC5D,2EAAA,qDAAA,AAAAZ,hIAACe,mDAAMJ,QAAQK,qFAAaP;;AAC5B,wCAAA,AAAAT,sBAAA,AAAAA,vDAACiB,iDAAWR,sBAAMC;;AAEpB,yCAAA,iDAAAQ,1FAAMI;AAAN,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;cAAA,AAAAE,4CAAAF,eAAA,rEAA0BR;WAA1B,AAAAU,4CAAAF,eAAA,lEAAkCN;AAAlC,AACE,IAAMJ,OAAK,gDAAA,hDAACc;IAAYb,WAAS,gDAAA,hDAACa;IAAYX,UAAQ,gDAAA,hDAACW;AAAvD,AACE,AAACjB,sBAAOJ,qCAASW;;AACjB;AAAA,AAAA,0FAAA,mDAAA,2CAAA,uDAAA,2CAAA,yDAAA,OAAA,0DAAA,OAAA,4EAAA,SAAA,mEAAA,yBAAA,gHAAA,2CAAA,iDAAA,2CAAA,yDAAA,QAAA,uDAAA,QAAA,4EAAA,UAAA,sEAAA,OAAA,0DAAA,OAAA,wEAAA,SAAA,4EAAA,gBAAA,2DAAA,4BAAA,8HAAA,2CAAA,2DAAA,KAAA,+DAAA,cAAA,oCAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,0DAAA,OAAA,wEAAA,yBAAA,8HAAA,2CAAA,2DAAA,KAAA,+DAAA,cAAA,iCAAA,8HAAA,2CAAA,2DAAA,SAAA,sDAAA,AAAAb,sBAAA,3qEAGIwB,+1BAUCC,+wBASCA,uVAKAC,gOAESjB,qEACG,WAAKkB;AAAL,AAAQ,OAACrB,sBAAOG,KAAK,AAAA,AAAIkB;GA9B3C,oGAAA,+JAAA,oEAAA,2CAAA,iEAAA,qCAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,0DAAA,OAAA,wEAAA,yBAAA,8HAAA,2CAAA,2DAAA,KAAA,+DAAA,cAAA,iCAAA,8HAAA,2CAAA,2DAAA,SAAA,qDAAA,WAAA,sDAAA,AAAA3B,0BAAA,1iDA+Bc,AAACH,uCAAWY,0EACN,gDAAA,sCAAA,pFAAI,AAACZ,uCAAWY,+wBAO9BgB,uVAKAC,gSAGShB,yEACG,WAAKiB;AAAL,AAAQ,OAACrB,sBAAOI,SAAS,AAAA,AAAIiB;GAhD/C,wGAAA,mKAAA,oEAAA,2CAAA,iEAAA,qCAAA,mFAAA,mDAAA,2CAAA,uDAAA,2CAAA,0DAAA,OAAA,wEAAA,SAAA,mEAAA,yBAAA,sHAAA,2CAAA,2DAAA,YAAA,+EAAA,KAAA,tuCAiDc,AAAC9B,uCAAWa,8EACN,oDAAA,sCAAA,xFAAI,AAACb,uCAAWa,+1BAO9BkB,uSAGW,iBAAAC,mBAAI,AAAChC,uCAAWY;AAAhB,AAAA,GAAAoB;AAAAA;;AAAA,IAAAA,uBAAsB,AAAChC,uCAAWa;AAAlC,AAAA,GAAAmB;AAAAA;;AAAA,OAAA7B,gBAA6CY;;;KA5D9D,6DAAA;AAAA,AA6DkB,OAACJ,yCAAaC,KAAKC,SAASC,QAAQC,QAAQC;WA7D9D,iBAAA,4IAAA,2CAAA,iDAAA,2CAAA,yDAAA,OAAA,hQA+DMiB,iUAAmD,2CAAA,AAAA,SAAA,lDAAM,cAAA,AAAA9B,dAAC+B,8BAAKnB","names":["wejure.components.loginPage/emptyField","field","cljs.core._EQ_","cljs.core/deref","cljs.core/count","wejure.components.loginPage/step-ref","cljs.core.atom","wejure.components.loginPage/loading-ref","wejure.components.loginPage/toMainPage","cljs.core/reset!","wejure.components.loginPage/stopLoading","wejure.components.loginPage/authenticate","name","password","details","loading","step","cljs.core.println","cljs.core.swap_BANG_","cljs.core/assoc","js/module$wejure$js$accSystem.login","p__12033","map__12034","cljs.core/--destructure-map","cljs.core.get","wejure.components.loginPage/login-page","reagent.core.atom","reagent-mui.material.box/box","reagent-mui.material.typography/typography","reagent-mui.material.text-field/text-field","e","reagent-mui.material.button/button","or__5045__auto__","reagent-mui.material.circular-progress/circular-progress","cljs.core/not"],"sourcesContent":["(ns wejure.components.loginPage\r\n  (:require [\"../js/accSystem\" :as acc]\r\n            [reagent-mui.material.box :refer [box]]\r\n            [reagent-mui.material.button :refer [button]]\r\n            [reagent-mui.material.circular-progress :refer [circular-progress]]\r\n            [reagent-mui.material.text-field :refer [text-field]]\r\n            [reagent-mui.material.typography :refer [typography]]\r\n            [reagent.core :as r]))\r\n\r\n(defn emptyField [field]\r\n    (= (count @field) 0))\r\n\r\n(def step-ref (atom \"\"))\r\n\r\n(def loading-ref (atom \"\"))\r\n\r\n(defn ^:export toMainPage []\r\n  (reset! @step-ref 3))\r\n\r\n(defn ^:export stopLoading []\r\n  (reset! @loading-ref false))\r\n\r\n(defn authenticate [name password details loading step]\r\n  (reset! loading-ref loading)\r\n  (reset! loading true)\r\n  (println (str \"account: \" (:account @details) \" loading: \" @loading))\r\n  (swap! details assoc :name @name)\r\n  (acc/login @name @password))\r\n\r\n(defn login-page [{:keys [details step]}]\r\n  (let [name (r/atom nil) password (r/atom nil) loading (r/atom false)]\r\n    (reset! step-ref step)\r\n    (fn []\r\n      [:div\r\n       {:style {:height \"100%\" :display \"flex\" :justify-content \"center\" :align-items \"center\"}}\r\n       [box\r\n        {:sx {:height \"300px\"\r\n              :width \"350px\"\r\n              :background-color \"#FFFEF7\"\r\n              :border-radius \"30px\"\r\n              :display \"flex\"\r\n              :flex-direction \"column\"\r\n              :justify-content \"space-between\"\r\n              :padding \"50px 30px\"}}\r\n\r\n        [typography\r\n         {:variant \"h5\"\r\n          :component \"div\"}\r\n         \"Login your WeJure account\"]\r\n\r\n        [:div\r\n         {:style {:display \"flex\"\r\n                  :flex-direction \"column\"}}\r\n\r\n         [typography\r\n          {:variant \"h6\"\r\n           :component \"div\"}\r\n          \"1. Enter your username\"]\r\n\r\n         [text-field\r\n          {:variant \"filled\"\r\n           :value @name\r\n           :on-change (fn [e] (reset! name (.. e -target -value)))\r\n           :error (emptyField name)\r\n           :helper-text (if (emptyField name) \"no text entered (20 characters max)\" \" \")\r\n           :input-props {:max-length 20}}]]\r\n\r\n        [:div\r\n         {:style {:display \"flex\"\r\n                  :flex-direction \"column\"}}\r\n\r\n         [typography\r\n          {:variant \"h6\"\r\n           :component \"div\"}\r\n          \"2. Enter your password\"]\r\n\r\n         [text-field\r\n          {:variant \"filled\"\r\n           :type \"password\"\r\n           :value @password\r\n           :on-change (fn [e] (reset! password (.. e -target -value)))\r\n           :error (emptyField password)\r\n           :helper-text (if (emptyField password) \"no text entered (20 characters max)\" \" \")\r\n           :input-props {:max-length 20}}]]\r\n\r\n        [:div\r\n         {:style {:display \"flex\"\r\n                  :flex-direction \"column\"\r\n                  :align-items \"center\"}}\r\n         [button\r\n          {:variant \"contained\"\r\n           :disable-elevation true\r\n           :disabled (or (emptyField name) (emptyField password) @loading)\r\n           :on-click #(authenticate name password details loading step)}\r\n          \"Submit\"]\r\n         [circular-progress {:sx {:margin \"10px\" :visibility (when (not @loading) \"hidden\")}}]]]])))"]}
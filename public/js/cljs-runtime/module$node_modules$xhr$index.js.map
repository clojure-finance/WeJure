{
"version":3,
"file":"module$node_modules$xhr$index.js",
"lineCount":9,
"mappings":"AAAAA,cAAA,CAAA,6BAAA,CAAkD,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CA2B1FC,QAASA,QAAO,CAACC,GAAD,CAAK,CACjB,IAAIC,IAAIA,CAAR,GAAaD,IAAb,CACI,GAAGA,GAAIE,CAAAA,cAAJ,CAAmBD,CAAnB,CAAH,CAA0B,MAAO,CAAA,CAErC,OAAO,CAAA,CAJU,CAOrBE,QAASA,WAAU,CAACC,GAAD,CAAMC,OAAN,CAAeC,QAAf,CAAyB,CACxC,IAAIC,OAASH,GAETI,WAAA,CAAWH,OAAX,CAAJ,EACIC,QACA,CADWD,OACX,CAAmB,QAAnB,GAAI,MAAOD,IAAX,GACIG,MADJ,CACa,CAAKH,GAAL,CADb,CAFJ,EAMIG,MANJ,CAMaE,KAAA,CAAMJ,OAAN,CAAe,CAAMD,GAAN,CAAf,CAGbG,OAAOD,CAAAA,QAAP,CAAkBA,QAClB,OAAOC,OAbiC,CAgB5CG,QAASA,UAAS,CAACN,GAAD,CAAMC,OAAN,CAAeC,QAAf,CAAyB,CACvCD,OAAA,CAAUF,UAAA,CAAWC,GAAX,CAAgBC,OAAhB,CAAyBC,QAAzB,CACV,OAAOK,WAAA,CAAWN,OAAX,CAFgC,CAK3CM,QAASA,WAAU,CAACN,OAAD,CAAU,CAsCzBO,QAASA,UAAS,CAACC,GAAD,CAAM,CACpBC,YAAA,CAAaC,YAAb,CACKF;GAAL,WAAoBG,MAApB,GACIH,GADJ,CACcG,KAAJ,CAAU,EAAV,EAAgBH,GAAhB,EAAuB,8BAAvB,EADV,CAGAA,IAAII,CAAAA,UAAJ,CAAiB,CACIC,KAAAA,SAAAA,eArCjBC,OAAJ,GACIA,MACA,CADS,CAAA,CACT,CAAAd,OAAQC,CAAAA,QAAR,CAmCYO,GAnCZ,CAAsBO,QAAtB,CAmCGC,IAAA,EAnCH,CAFJ,CA+BoB,CAUxBC,QAASA,SAAQ,EAAG,CAChB,GAAIC,CAAAA,OAAJ,CAAA,CAEAT,YAAA,CAAaC,YAAb,CAGI,KAAAS,OAFDnB,OAAQoB,CAAAA,MAAX,EAAkCC,IAAAA,EAAlC,GAAqBC,GAAIH,CAAAA,MAAzB,CAEa,GAFb,CAI6B,IAAf,GAAAG,GAAIH,CAAAA,MAAJ,CAAsB,GAAtB,CAA4BG,GAAIH,CAAAA,MAE9C,KAAIJ,SAAWF,eAAf,CACIU,IAAM,IAEV,IAAe,CAAf,GAAIJ,MAAJ,CAAiB,CAtCjB,GAAIG,GAAIP,CAAAA,QAAR,CACeA,QAAAA,CAAAA,GAAAA,CAAAA,QADf,KAGW,IAAA,EAAA,QAAA,CAAA,GAAA,CAAA,YAAA,CAAA,CAsJE,CAAA,CAAA,CAGjB,GAAI,CACA,GAAyB,UAAzB,GA1JWO,GA0JHE,CAAAA,YAAR,CAAqC,CACjC,QAAA;AA3JOF,GA2JIG,CAAAA,WAAX,OAAA,CADiC,CAGrC,IAAIC,sBA7JOJ,GA6JqBG,CAAAA,WAA5BC,EAAwF,aAAxFA,GA7JOJ,GA6JwCG,CAAAA,WAAYE,CAAAA,eAAgBC,CAAAA,QAC/E,IAAyB,EAAzB,GA9JWN,GA8JHE,CAAAA,YAAR,EAA+B,CAACE,qBAAhC,CAAuD,CACnD,QAAA,CA/JOJ,GA+JIG,CAAAA,WAAX,OAAA,CADmD,CALvD,CAQF,MAAOI,CAAP,CAAU,EAEZ,QAAA,CAAO,IAbU,CAnJb,GAAIC,MAAJ,CACI,GAAI,CACAd,QAAA,CAAOe,IAAKC,CAAAA,KAAL,CAAWhB,QAAX,CADP,CAEF,MAAOa,CAAP,CAAU,EA8BZd,QAAA,CAAW,CACPC,KA5BDA,QA2BQ,CAEPJ,WAAYO,MAFL,CAGCc,MAHD,CAIPC,QAAS,EAJF,CAKPC,IAAKpC,GALE,CAMPqC,WAAYd,GANL,CAQRA,IAAIe,CAAAA,qBAAP,GACItB,QAASmB,CAAAA,OADb,CACuBI,YAAA,CAAahB,GAAIe,CAAAA,qBAAJ,EAAb,CADvB,CATa,CAAjB,IAaId,IAAA,CAAUZ,KAAJ,CAAU,+BAAV,CAE8BK;MAAAA,CAATD,QAASC,CAAAA,IArEpCF,OAAJ,GACIA,MACA,CADS,CAAA,CACT,CAAAd,OAAQC,CAAAA,QAAR,CAmEYsB,GAnEZ,CAmEiBR,QAnEjB,CAAgCC,MAAhC,CAFJ,CA0CA,CADgB,CA/CpB,GAA+B,WAA/B,GAAG,MAAOhB,QAAQC,CAAAA,QAAlB,CACI,KAAUU,MAAJ,CAAU,2BAAV,CAAN,CAGJ,IAAIG,OAAS,CAAA,CAAb,CA0EIQ,IAAMtB,OAAQsB,CAAAA,GAAdA,EAAqB,IAEpBA,IAAL,GAEQA,GAFR,CACQtB,OAAQuC,CAAAA,IAAZ,EAAoBvC,OAAQoB,CAAAA,MAA5B,CACU,IAAIf,SAAUmC,CAAAA,cADxB,CAGU,IAAInC,SAAUoC,CAAAA,cAJ5B,CAQA,KAAIC,GAAJ,CACIxB,OADJ,CAEInB,IAAMuB,GAAIa,CAAAA,GAAVpC,CAAgBC,OAAQD,CAAAA,GAAxBA,EAA+BC,OAAQmC,CAAAA,GAF3C,CAGIF,OAASX,GAAIW,CAAAA,MAAbA,CAAsBjC,OAAQiC,CAAAA,MAA9BA,EAAwC,KAH5C,CAIIjB,KAAOhB,OAAQgB,CAAAA,IAAfA,EAAuBhB,OAAQ2C,CAAAA,IAJnC,CAKIT,QAAUZ,GAAIY,CAAAA,OAAdA,CAAwBlC,OAAQkC,CAAAA,OAAhCA,EAA2C,EAL/C,CAMIU,KAAO,CAAC,CAAC5C,OAAQ4C,CAAAA,IANrB,CAOId,OAAS,CAAA,CAPb,CAQIpB,YARJ;AASIG,gBAAkB,CAClBG,KAAMK,IAAAA,EADY,CAElBa,QAAS,EAFS,CAGlBtB,WAAY,CAHM,CAIVqB,MAJU,CAKlBE,IAAKpC,GALa,CAMlBqC,WAAYd,GANM,CASlB,OAAJ,EAActB,QAAd,EAA0C,CAAA,CAA1C,GAAyBA,OAAQ6C,CAAAA,IAAjC,GACIf,MAEA,CAFS,CAAA,CAET,CADAI,OAAA,CAAA,MACA,EADqBA,OAAA,CAAA,MACrB,GAD2CA,OAAA,CAAA,MAC3C,CAD+D,kBAC/D,EAAe,KAAf,GAAID,MAAJ,EAAmC,MAAnC,GAAwBA,MAAxB,GACIC,OAAA,CAAQ,cAAR,CACA,EAD2BA,OAAA,CAAQ,cAAR,CAC3B,GADuDA,OAAA,CAAQ,cAAR,CACvD,CADiF,kBACjF,EAAAlB,IAAA,CAAOe,IAAKe,CAAAA,SAAL,CAAgC,CAAA,CAAjB,GAAA9C,OAAQ6C,CAAAA,IAAR,CAAwB7B,IAAxB,CAA+BhB,OAAQ6C,CAAAA,IAAtD,CAFX,CAHJ,CASAvB,IAAIyB,CAAAA,kBAAJ,CAvGAC,QAAyB,EAAG,CACD,CAAvB,GAAI1B,GAAI2B,CAAAA,UAAR,EACIC,UAAA,CAAWjC,QAAX,CAAqB,CAArB,CAFoB,CAwG5BK,IAAI6B,CAAAA,MAAJ,CAAalC,QACbK,IAAI8B,CAAAA,OAAJ,CAAc7C,SAEde;GAAI+B,CAAAA,UAAJ,CAAiBC,QAAS,EAAG,EAG7BhC,IAAIiC,CAAAA,OAAJ,CAAcC,QAAQ,EAAE,CACpBtC,OAAA,CAAU,CAAA,CADU,CAGxBI,IAAImC,CAAAA,SAAJ,CAAgBlD,SAChBe,IAAIoC,CAAAA,IAAJ,CAASzB,MAAT,CAAiBlC,GAAjB,CAAsB,CAAC6C,IAAvB,CAA6B5C,OAAQ2D,CAAAA,QAArC,CAA+C3D,OAAQ4D,CAAAA,QAAvD,CAEIhB,KAAJ,GACItB,GAAIuC,CAAAA,eADR,CAC0B,CAAC,CAAC7D,OAAQ6D,CAAAA,eADpC,CAMI,EAACjB,IAAL,EAA+B,CAA/B,CAAa5C,OAAQ8D,CAAAA,OAArB,GACIpD,YADJ,CACmBwC,UAAA,CAAW,QAAQ,EAAE,CAChC,GAAIhC,CAAAA,OAAJ,CAAA,CACAA,OAAA,CAAU,CAAA,CACVI,IAAIyC,CAAAA,KAAJ,CAAU,SAAV,CACA,KAAIlC,EAAQlB,KAAJ,CAAU,wBAAV,CACRkB,EAAEmC,CAAAA,IAAF,CAAS,WACTzD,UAAA,CAAUsB,CAAV,CALA,CADgC,CAArB,CAOZ7B,OAAQ8D,CAAAA,OAPI,CADnB,CAWA,IAAIxC,GAAI2C,CAAAA,gBAAR,CACI,IAAIvB,GAAJ,GAAWR,QAAX,CACOA,OAAQrC,CAAAA,cAAR,CAAuB6C,GAAvB,CAAH,EACIpB,GAAI2C,CAAAA,gBAAJ,CAAqBvB,GAArB,CAA0BR,OAAA,CAAQQ,GAAR,CAA1B,CAHZ;IAMO,IAAI1C,OAAQkC,CAAAA,OAAZ,EAAuB,CAACxC,OAAA,CAAQM,OAAQkC,CAAAA,OAAhB,CAAxB,CACH,KAAUvB,MAAJ,CAAU,mDAAV,CAAN,CAGA,cAAJ,EAAsBX,QAAtB,GACIsB,GAAIE,CAAAA,YADR,CACuBxB,OAAQwB,CAAAA,YAD/B,CAII,aAAJ,EAAoBxB,QAApB,EACkC,UADlC,GACI,MAAOA,QAAQkE,CAAAA,UADnB,EAGIlE,OAAQkE,CAAAA,UAAR,CAAmB5C,GAAnB,CAMJA,IAAI6C,CAAAA,IAAJ,CAASnD,IAAT,EAAiB,IAAjB,CAEA,OAAOM,IA3KkB,CAgM7B8C,QAASA,KAAI,EAAG,EArPZC,MAAAA,CAAS9E,OAAA,CAAQ,mCAAR,CACb,KAAIY,WAAaZ,OAAA,CAAQ,uCAAR,CAAjB,CACI+C,aAAe/C,OAAA,CAAQ,iDAAR,CADnB;AAEIa,MAAQb,OAAA,CAAQ,qCAAR,CAEZC,OAAOC,CAAAA,OAAP,CAAiBY,SAEjBb,OAAOC,CAAAA,OAAQ6E,CAAAA,OAAf,CAAyBjE,SACzBA,UAAUoC,CAAAA,cAAV,CAA2B4B,MAAO5B,CAAAA,cAAlC,EAAoD2B,IACpD/D,UAAUmC,CAAAA,cAAV,CAA2B,iBAAA,EAAsB,KAAInC,SAAUoC,CAAAA,cAApC,CAAwDpC,SAAUoC,CAAAA,cAAlE,CAAmF4B,MAAO7B,CAAAA,cAUrH+B,UAAqB,CAACC,KAAD,CAAQC,QAAR,CAAkB,CACnC,IAAK,IAAI7E,EAAI,CAAb,CAAgBA,CAAhB,CAAoB4E,KAAME,CAAAA,MAA1B,CAAkC9E,CAAA,EAAlC,CACI6E,QAAA,CAASD,KAAA,CAAM5E,CAAN,CAAT,CAF+B,CAAvC2E,CARA,CAAa,gCAAA,CAAA,KAAA,CAAA,GAAA,CAAb,CAAgE,QAAQ,CAACtC,MAAD,CAAS,CAC7E5B,SAAA,CAAqB,QAAX,GAAA4B,MAAA,CAAsB,KAAtB,CAA8BA,MAAxC,CAAA,CAAkD,QAAQ,CAAClC,GAAD,CAAMC,OAAN,CAAeC,QAAf,CAAyB,CAC/ED,OAAA;AAAUF,UAAA,CAAWC,GAAX,CAAgBC,OAAhB,CAAyBC,QAAzB,CACVD,QAAQiC,CAAAA,MAAR,CAAiBA,MAAO0C,CAAAA,WAAP,EACjB,OAAOrE,WAAA,CAAWN,OAAX,CAHwE,CADN,CAAjF,CAb0F;",
"sources":["node_modules/xhr/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$xhr$index\"] = function(global,require,module,exports) {\n\"use strict\";\nvar window = require(\"global/window\")\nvar isFunction = require(\"is-function\")\nvar parseHeaders = require(\"parse-headers\")\nvar xtend = require(\"xtend\")\n\nmodule.exports = createXHR\n// Allow use of default import syntax in TypeScript\nmodule.exports.default = createXHR;\ncreateXHR.XMLHttpRequest = window.XMLHttpRequest || noop\ncreateXHR.XDomainRequest = \"withCredentials\" in (new createXHR.XMLHttpRequest()) ? createXHR.XMLHttpRequest : window.XDomainRequest\n\nforEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n        options = initParams(uri, options, callback)\n        options.method = method.toUpperCase()\n        return _createXHR(options)\n    }\n})\n\nfunction forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n        iterator(array[i])\n    }\n}\n\nfunction isEmpty(obj){\n    for(var i in obj){\n        if(obj.hasOwnProperty(i)) return false\n    }\n    return true\n}\n\nfunction initParams(uri, options, callback) {\n    var params = uri\n\n    if (isFunction(options)) {\n        callback = options\n        if (typeof uri === \"string\") {\n            params = {uri:uri}\n        }\n    } else {\n        params = xtend(options, {uri: uri})\n    }\n\n    params.callback = callback\n    return params\n}\n\nfunction createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback)\n    return _createXHR(options)\n}\n\nfunction _createXHR(options) {\n    if(typeof options.callback === \"undefined\"){\n        throw new Error(\"callback argument missing\")\n    }\n\n    var called = false\n    var callback = function cbOnce(err, response, body){\n        if(!called){\n            called = true\n            options.callback(err, response, body)\n        }\n    }\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            setTimeout(loadFunc, 0)\n        }\n    }\n\n    function getBody() {\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = undefined\n\n        if (xhr.response) {\n            body = xhr.response\n        } else {\n            body = xhr.responseText || getXml(xhr)\n        }\n\n        if (isJson) {\n            try {\n                body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        return body\n    }\n\n    function errorFunc(evt) {\n        clearTimeout(timeoutTimer)\n        if(!(evt instanceof Error)){\n            evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\") )\n        }\n        evt.statusCode = 0\n        return callback(evt, failureResponse)\n    }\n\n    // will load the data & process the response in a special response object\n    function loadFunc() {\n        if (aborted) return\n        var status\n        clearTimeout(timeoutTimer)\n        if(options.useXDR && xhr.status===undefined) {\n            //IE8 CORS GET successful response doesn't have a status field, but body is fine\n            status = 200\n        } else {\n            status = (xhr.status === 1223 ? 204 : xhr.status)\n        }\n        var response = failureResponse\n        var err = null\n\n        if (status !== 0){\n            response = {\n                body: getBody(),\n                statusCode: status,\n                method: method,\n                headers: {},\n                url: uri,\n                rawRequest: xhr\n            }\n            if(xhr.getAllResponseHeaders){ //remember xhr can in fact be XDR for CORS in IE\n                response.headers = parseHeaders(xhr.getAllResponseHeaders())\n            }\n        } else {\n            err = new Error(\"Internal XMLHttpRequest Error\")\n        }\n        return callback(err, response, response.body)\n    }\n\n    var xhr = options.xhr || null\n\n    if (!xhr) {\n        if (options.cors || options.useXDR) {\n            xhr = new createXHR.XDomainRequest()\n        }else{\n            xhr = new createXHR.XMLHttpRequest()\n        }\n    }\n\n    var key\n    var aborted\n    var uri = xhr.url = options.uri || options.url\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var timeoutTimer\n    var failureResponse = {\n        body: undefined,\n        headers: {},\n        statusCode: 0,\n        method: method,\n        url: uri,\n        rawRequest: xhr\n    }\n\n    if (\"json\" in options && options.json !== false) {\n        isJson = true\n        headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\") //Don't override existing accept header declared by user\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\") //Don't override existing accept header declared by user\n            body = JSON.stringify(options.json === true ? body : options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = loadFunc\n    xhr.onerror = errorFunc\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    xhr.onabort = function(){\n        aborted = true;\n    }\n    xhr.ontimeout = errorFunc\n    xhr.open(method, uri, !sync, options.username, options.password)\n    //has to be after open\n    if(!sync) {\n        xhr.withCredentials = !!options.withCredentials\n    }\n    // Cannot set timeout with sync request\n    // not setting timeout on the xhr object, because of old webkits etc. not handling that correctly\n    // both npm's request and jquery 1.x use this kind of timeout, so this is being consistent\n    if (!sync && options.timeout > 0 ) {\n        timeoutTimer = setTimeout(function(){\n            if (aborted) return\n            aborted = true//IE9 may still call readystatechange\n            xhr.abort(\"timeout\")\n            var e = new Error(\"XMLHttpRequest timeout\")\n            e.code = \"ETIMEDOUT\"\n            errorFunc(e)\n        }, options.timeout )\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    } else if (options.headers && !isEmpty(options.headers)) {\n        throw new Error(\"Headers cannot be set on an XDomainRequest object\")\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    if (\"beforeSend\" in options &&\n        typeof options.beforeSend === \"function\"\n    ) {\n        options.beforeSend(xhr)\n    }\n\n    // Microsoft Edge browser sends \"undefined\" when send is called with undefined value.\n    // XMLHttpRequest spec says to pass null as body to indicate no body\n    // See https://github.com/naugtur/xhr/issues/100.\n    xhr.send(body || null)\n\n    return xhr\n\n\n}\n\nfunction getXml(xhr) {\n    // xhr.responseXML will throw Exception \"InvalidStateError\" or \"DOMException\"\n    // See https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseXML.\n    try {\n        if (xhr.responseType === \"document\") {\n            return xhr.responseXML\n        }\n        var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\"\n        if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n            return xhr.responseXML\n        }\n    } catch (e) {}\n\n    return null\n}\n\nfunction noop() {}\n\n};"],
"names":["shadow$provide","global","require","module","exports","isEmpty","obj","i","hasOwnProperty","initParams","uri","options","callback","params","isFunction","xtend","createXHR","_createXHR","errorFunc","evt","clearTimeout","timeoutTimer","Error","statusCode","failureResponse","called","response","body","loadFunc","aborted","status","useXDR","undefined","xhr","err","responseType","responseXML","firefoxBugTakenEffect","documentElement","nodeName","e","isJson","JSON","parse","method","headers","url","rawRequest","getAllResponseHeaders","parseHeaders","cors","XDomainRequest","XMLHttpRequest","key","data","sync","json","stringify","onreadystatechange","readystatechange","readyState","setTimeout","onload","onerror","onprogress","xhr.onprogress","onabort","xhr.onabort","ontimeout","open","username","password","withCredentials","timeout","abort","code","setRequestHeader","beforeSend","send","noop","window","default","forEachArray","array","iterator","length","toUpperCase"]
}

{"version":3,"sources":["starter/components/chatPage.cljs"],"mappings":"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","names":["starter.components.chatPage/recipient-list","reagent.core.atom","starter.components.chatPage/selected-recipient","starter.components.chatPage/message","starter.components.chatPage/message-list","starter.components.chatPage/atom-reset","target-atom","value","cljs.core/reset!","starter.components.chatPage/atom-conj","cljs.core.swap_BANG_","cljs.core/conj","starter.components.chatPage/atom-str","cljs.core/str","p__11895","map__11896","cljs.core/--destructure-map","cljs.core.get","starter.components.chatPage/chatPage","details","step","cljs.core/deref","username","cljs.core._EQ_","cljs.core/count","js/module$starter$js$chatSystem.init","reagent-mui.material.typography/typography","event","js/module$starter$js$chatSystem.displayMessage","iter__5523__auto__","s__11898","cljs.core/LazySeq","temp__5804__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__5521__auto__","size__5522__auto__","b__11900","cljs.core/chunk-buffer","i__11899","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__11897","cljs.core/chunk-rest","cljs.core/first","cljs.core/cons","cljs.core/rest","recipient","cljs.core.not_EQ_","reagent-mui.material.button/button","js/module$starter$js$chatSystem.storeMessage","cljs.core/chunk-first"],"sourcesContent":["(ns starter.components.chatPage\r\n  (:require [reagent.core :as r] \r\n            [reagent-mui.material.text-field :refer [text-field]]\r\n            [reagent-mui.material.text-field :refer [text-field]]\r\n            [reagent-mui.material.button :refer [button]]\r\n            [reagent-mui.material.typography :refer [typography]]\r\n            [reagent-mui.material.select :refer [select]]\r\n            [reagent-mui.material.form-control :refer [form-control]]\r\n            [\"../js/chatSystem\" :as chat]))\r\n\r\n(def recipient-list (r/atom [\"Select recipient\"]))\r\n\r\n(def selected-recipient (r/atom \"\"))\r\n\r\n(def message (r/atom \"\"))\r\n\r\n(def message-list (r/atom \"\"))\r\n\r\n(defn ^:export atom-reset [target-atom value]\r\n  (reset! target-atom value)\r\n  target-atom)\r\n\r\n(defn ^:export atom-conj [target-atom value]\r\n  (swap! target-atom conj value)\r\n  target-atom)\r\n\r\n(defn ^:export atom-str [target-atom value]\r\n  (swap! target-atom str value)\r\n  target-atom)\r\n\r\n(defn chatPage [{:keys [details step]}]\r\n  (let [username (get @details :name)]\r\n    (when (= 1 (count @recipient-list))\r\n      (chat/init username)) \r\n    [:div\r\n     [typography\r\n      {:variant \"h4\"\r\n       :component \"div\"}\r\n      \"Direct Messages\"]\r\n     [:div\r\n      [:label \"Send to: \"]\r\n      [:select {:value @selected-recipient\r\n                :on-change (fn [event] (reset! selected-recipient (-> event .-target .-value)) (chat/displayMessage @selected-recipient))}\r\n       (for [recipient @recipient-list]\r\n         (when (not= recipient username)\r\n           [:option {:key recipient :value recipient} recipient]))]]\r\n\r\n     [:div\r\n      {:style {:height \"600px\"\r\n               :border \"2px solid #ccc\"\r\n               :display \"flex\"\r\n               :flex-direction \"column\"}}\r\n      [:p {:dangerouslySetInnerHTML\r\n           {:__html @message-list}}]]\r\n\r\n     [:div\r\n      [:input {:style {:width \"100%\"}\r\n               :id \"message\"\r\n               :type \"text\"\r\n               :placeholder \"Send message here\"\r\n               :value @message\r\n               :on-change (fn [event]\r\n                            (reset! message (-> event .-target .-value)))}]]\r\n\r\n     [:div\r\n      [button\r\n       {:variant \"contained\"\r\n        :disable-elevation true\r\n        :size \"small\"\r\n        :on-click #(chat/storeMessage @selected-recipient @message)}\r\n       \"send\"]]]\r\n  ))\r\n\r\n\r\n"]}